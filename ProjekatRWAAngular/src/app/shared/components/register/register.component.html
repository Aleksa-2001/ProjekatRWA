<div class="container position-relative my-3 wrap">
    <div class="container window">
        <form class="d-flex flex-column mx-auto p-3 border border-secondary border-3 rounded-3 form-window" [formGroup]="registerForm" (ngSubmit)="onSubmit()">
            <h1 class="text-center">Registruj se</h1>
            <div class="d-sm-flex justify-content-between">
                <div class="mb-2">
                    <label for="inputFirstName">Ime*</label>
                    <input id="inputFirstName" class="form-control border border-secondary" type="text" formControlName="firstName" placeholder="Ime" (input)="onInput()" maxlength="20"/>
                    <small class="text-danger" *ngIf="registerForm.controls['firstName'].dirty && registerForm.hasError('required', 'firstName')">
                        *Ime je obavezno polje
                    </small>
                </div>
                <div class="mb-2">
                    <label for="inputLastName">Prezime*</label>
                    <input id="inputLastName" class="form-control border border-secondary" type="text" formControlName="lastName" placeholder="Prezime" (input)="onInput()" maxlength="20"/>
                    <small class="text-danger" *ngIf="registerForm.controls['lastName'].dirty && registerForm.hasError('required', 'lastName')">
                        *Prezime je obavezno polje
                    </small>
                </div>
            </div>
            <div class="mb-2">
                <label for="inputAddress">Adresa*</label>
                <input id="inputAddress" class="form-control border border-secondary" type="text" formControlName="address" placeholder="Adresa" (input)="onInput()" maxlength="50"/>
                <small class="text-danger" *ngIf="registerForm.controls['address'].dirty && registerForm.hasError('required', 'address')">
                    *Adresa je obavezno polje
                </small>
            </div>
            <div class="mb-2">
                <label for="inputCity">Grad*</label>
                <input id="inputCity" class="form-control border border-secondary" type="text" formControlName="city" placeholder="Grad" (input)="onInput()" maxlength="50"/>
                <small class="text-danger" *ngIf="registerForm.controls['city'].dirty && registerForm.hasError('required', 'city')">
                    *Grad je obavezno polje
                </small>
            </div>
            <div class="mb-2">
                <label for="inputEmail">Email adresa*</label>
                <input id="inputEmail" class="form-control border border-secondary" type="text" formControlName="email" placeholder="Email adresa" (input)="onInput()" maxlength="50"/>
                <small class="text-danger" *ngIf="registerForm.controls['email'].dirty && registerForm.hasError('required', 'email')">
                    *Email adresa je obavezno polje
                </small>
                <small class="text-danger" *ngIf="registerForm.controls['email'].dirty && registerForm.hasError('email', 'email')">
                    *Format emaila nije ispravan
                </small>
            </div>
            <div class="mb-2">
                <label for="inputUsername">Korisničko ime*</label>
                <input id="inputUsername" class="form-control border border-secondary" type="text" formControlName="username" placeholder="Korisničko ime" (input)="onInput()" maxlength="20"/>
                <small class="text-danger" *ngIf="registerForm.controls['username'].dirty && registerForm.hasError('required', 'username')">
                    *Korisničko ime je obavezno polje
                </small>
                <small class="text-danger" *ngIf="registerForm.controls['password'].dirty && registerForm.hasError('minlength', 'username')">
                    *Korisničko ime mora imati minimum 3 karaktera
                </small>
                <small class="text-danger" *ngIf="registerForm.controls['password'].dirty && registerForm.hasError('maxlength', 'username')">
                    *Korisničko ime mora imati maksimum 20 karaktera
                </small>
            </div>
            <div class="mb-2">
                <label for="inputPassword">Lozinka*</label>
                <input id="inputPassword" class="form-control border border-secondary" type="password" formControlName="password" placeholder="Lozinka" (input)="onInput()" maxlength="50"/>
                <small class="text-danger" *ngIf="registerForm.controls['password'].dirty && registerForm.hasError('required', 'password')">
                    *Lozinka je obavezno polje
                </small>
                <small class="text-danger" *ngIf="registerForm.controls['password'].dirty && registerForm.hasError('minlength', 'password')">
                    *Lozinka mora imati minimum 8 karaktera
                </small>
            </div>
            <div class="mb-2">
                <label for="inputRepeatPassword">Ponovi lozinku*</label>
                <input id="inputRepeatPassword" class="form-control border border-secondary" type="password" formControlName="repeatPassword" placeholder="Ponovi lozinku" (input)="onInput()" maxlength="50" />
                <small class="text-danger" *ngIf="registerForm.controls['repeatPassword'].dirty && registerForm.hasError('required', 'repeatPassword')">
                    *Ponovi lozinku je obavezno polje
                </small>
                <small class="text-danger" *ngIf="registerForm.controls['repeatPassword'].dirty && registerForm.hasError('minlength', 'repeatPassword')">
                    *Ponovljena lozinka mora imati minimum 8 karaktera
                </small>
                <small class="text-danger" *ngIf="registerForm.controls['repeatPassword'].dirty && !this.checkPasswordInputs(formData)">
                    *Lozinke se ne podudaraju
                </small>
            </div>
            <button [disabled]="!(this.registerForm.valid && this.checkPasswordInputs(formData))" class="btn btn-primary mx-auto my-2" type="submit">Napravi nalog</button>
            <div *ngIf="error$ | async as error" class="text-danger text-center mb-0">
                <p class="mb-2" *ngIf="error.includes('409')">Uneto korisničko ime već postoji</p>
                <p class="mb-2" *ngIf="error.includes('500')">Serverska greška</p>
                <p class="mb-2" *ngIf="error.includes('API')">Nije uspelo povezivanje sa serverom</p>
            </div>
            <p class="text-center mb-0">Već ste kreirali nalog? Prijavite se <a class="text-primary" [routerLink]="['/login']" routerLinkActive="router-link-active" >ovde</a></p>
        </form>
    </div>
</div>
